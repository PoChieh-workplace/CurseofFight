advancement revoke @s only cursefight:game/use_contract

execute if entity @s[tag=cursefight.activity.demon_contract.contract_read] at @s anchored eyes run summon ominous_item_spawner ^ ^ ^1 {spawn_item_after_ticks:60,item:{id:"minecraft:paper",count:1,"components": {"minecraft:consumable": {"consume_seconds": 2,"animation": "block","sound": "minecraft:item.book.page_turn","has_consume_particles": false,"on_consume_effects": [{"type": "minecraft:play_sound","sound": "minecraft:particle.soul_escape"}]},"minecraft:custom_data": {"cursefight.activity.demon_contract.used": true},"minecraft:enchantments": {"minecraft:vanishing_curse": 0},"minecraft:lore": ["[\"\",{\"text\":\"使用後可以了解契約內容，並決定是否簽訂契約，按下 \",\"italic\":false,\"color\":\"dark_purple\"},{\"keybind\":\"key.use\",\"color\":\"green\"},{\"text\":\" 來查看，\",\"italic\":false,\"color\":\"dark_purple\"}]","[\"\",{\"text\":\"閱讀後仍可決定是否簽下契約，但一人僅能查看一次契約\",\"italic\":false,\"color\":\"dark_purple\"}]"],"minecraft:custom_name": "[\"\",{\"text\":\"【 惡魔契約書 】\",\"italic\":false,\"color\":\"dark_red\"}]","minecraft:custom_model_data": {"strings": ["demon_contract_paper"],"floats": [724022]}}}}
execute if entity @s[tag=cursefight.activity.demon_contract.contract_read] run return run tellraw @a {"text":"","color":"white","bold":false,"extra":[{"text":"Curse of Fight >>> ","color":"#CA8EFF"},{"text":"【 掌管者 】唉～你已經收到過契約書了， 拿給還沒用過的玩家吧， 最近我的玩具開始貪心了呢","color":"red"}]}

tag @s add cursefight.activity.demon_contract.contract_read
execute store result score @s cursefight.activity.demon_contract.lvl run random value 1..6
execute if score @s cursefight.activity.demon_contract.lvl matches 1..6 run function cursefight:activity/random/demon_contract/lvl1/roll
